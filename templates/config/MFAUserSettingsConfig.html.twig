{# @copyright   Copyright (C) 2010-2024 Combodo SARL #}
{# @license     http://opensource.org/licenses/AGPL-3.0 #}

{% UIPanel ForInformation { sTitle:sTitle } %}

	{% block alert %}
		{% set message_class = 'ibo-is-hidden' %}
		{% if sMessage %}
			{% set message_class = '' %}
		{% endif %}

		{% UIAlert ForSuccess { sTitle:'', sId:'success-message', AddCSSClass:message_class } %}
		<div id="success-message-content">{{ sMessage }}</div>
		{% EndUIAlert %}

		{% set error_class = 'ibo-is-hidden' %}
		{% if sError %}
			{% set error_class = '' %}
		{% endif %}

		{% UIAlert ForFailure { sTitle:'', sId:'error-message', AddCSSClass:error_class } %}
		<div id="error-message-content">{{ sError }}</div>
		{% EndUIAlert %}
	{% endblock %}

	{% UIMultiColumn Standard { } %}
		{% UIColumn Standard { } %}

			{% block configuration %}

			{% endblock %}

			{% block default_selection %}
				{% UIFieldSet Standard { sLegend:'UI:MFA:Modes:Default:Title'|dict_s } %}
					{% UIField Small { sLabel:'UI:MFA:Modes:Default'|dict_s } %}
						{% if oMFAUserSettings.Get("validated") == 'no' %}
							{% UIButton ForSecondaryAction { sLabel:'UI:MFA:Modes:Default:Set'|dict_s, IsDisabled:true } %}
						{% elseif oMFAUserSettings.Get("is_default") == 'yes' %}
							{{ oMFAUserSettings.GetEditValue("is_default") }}
						{% else %}
							{% UIForm Standard {Action:'exec.php' } %}
								{% UIInput ForHidden { sName:'exec_module', sValue:'combodo-mfa-base' } %}
								{% UIInput ForHidden { sName:'exec_page', sValue:'index.php' } %}
								{% UIInput ForHidden { sName:'operation', sValue:'SetAsDefaultMode' } %}
								{% UIInput ForHidden { sName:'class', sValue:oMFAUserSettings.Get("finalclass") } %}
								{% UIInput ForHidden { sName:'verb', sValue:'update' } %}

								{% UIButton ForSecondaryAction { sLabel:'UI:MFA:Modes:Default:Set'|dict_s, bIsSubmit:true, Tooltip:'UI:MFA:Modes:Default:Set+'|dict_s } %}
							{% EndUIForm %}
						{% endif %}
					{% EndUIField %}
				{% EndUIFieldSet %}
			{% endblock %}

			{% block validation %}

			{% endblock %}

		{% EndUIColumn %}
		{% UIColumn Standard { } %}
		{% EndUIColumn %}
	{% EndUIMultiColumn %}

{% EndUIPanel %}
